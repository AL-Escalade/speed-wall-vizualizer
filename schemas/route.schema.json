{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/AL-Escalade/speed-wall-vizualizer/schemas/route.schema.json",
  "title": "Reference Route",
  "description": "Definition of a reference route for speed climbing",
  "type": "object",
  "required": ["name", "color", "holds"],
  "properties": {
    "name": {
      "type": "string",
      "description": "Unique identifier for the route"
    },
    "description": {
      "type": "string",
      "description": "Human-readable description of the route"
    },
    "holdTypes": {
      "type": "object",
      "description": "Override dimensions for hold types (optional)",
      "additionalProperties": {
        "type": "object",
        "required": ["width", "height"],
        "properties": {
          "width": {
            "type": "number",
            "minimum": 0,
            "description": "Width in mm"
          },
          "height": {
            "type": "number",
            "minimum": 0,
            "description": "Height in mm"
          }
        }
      }
    },
    "holdScales": {
      "type": "object",
      "description": "Scale factors per hold type (e.g., { \"BIG\": 0.8 })",
      "additionalProperties": {
        "type": "number",
        "minimum": 0,
        "maximum": 2
      }
    },
    "columns": {
      "type": "string",
      "pattern": "^[A-M]{11}$",
      "description": "Column coordinate system: 11 letters defining columns A-K position mapping. Predefined: ABC=ABCDEFGHIJK (default), FFME=ABCDEFGHIKL, IFSC=ABCDEFGHILM",
      "default": "ABCDEFGHIJK"
    },
    "color": {
      "type": "string",
      "pattern": "^#[0-9A-Fa-f]{6}$",
      "description": "Default color for holds (hex format, e.g., #FF0000)"
    },
    "holds": {
      "type": "array",
      "description": "List of holds in compact format",
      "items": {
        "type": "string",
        "pattern": "^(SN|DX)(10|[1-9]) (BIG|FOOT|STOP|PAD) [A-M](10|[1-9]) ((SN|DX)(10|[1-9]):)?[A-M](10|[1-9])( [0-9.]+)?( @[A-Za-z0-9-]+)?$",
        "description": "Hold definition: PANEL TYPE POSITION ORIENTATION [SCALE] [@LABEL]. Column letters must match the declared coordinate system."
      }
    },
    "smearingZones": {
      "type": "array",
      "description": "Smearing zones (areas for friction-based foot placements on the wall surface)",
      "items": {
        "$ref": "#/definitions/smearingZone"
      }
    }
  },
  "definitions": {
    "smearingZone": {
      "type": "object",
      "description": "A rectangular zone where climbers can use friction-based foot placements",
      "required": ["label", "panel", "column", "row", "width", "height"],
      "properties": {
        "label": {
          "type": "string",
          "description": "Zone identifier displayed on the plan (e.g., 'Z1', 'Zone A')"
        },
        "panel": {
          "type": "string",
          "pattern": "^(SN|DX)(10|[1-9])$",
          "description": "Panel identifier where the zone starts (e.g., 'DX1', 'SN3')"
        },
        "column": {
          "type": "string",
          "pattern": "^[A-M]$",
          "description": "Column letter for the bottom-left corner (A-M)"
        },
        "columnOffset": {
          "type": "number",
          "description": "Horizontal offset from the column in insert units (e.g., 0.5 = half column to the right)"
        },
        "row": {
          "type": "number",
          "minimum": 1,
          "maximum": 10,
          "description": "Row number for the bottom-left corner (can be decimal, e.g., 4.5 = between rows 4 and 5)"
        },
        "width": {
          "type": "number",
          "minimum": 0,
          "exclusiveMinimum": true,
          "description": "Width in insert units (e.g., 2.5 = 2.5 column spacings)"
        },
        "height": {
          "type": "number",
          "minimum": 0,
          "exclusiveMinimum": true,
          "description": "Height in insert units (e.g., 4.0 = 4 row spacings, can span panels)"
        }
      }
    }
  }
}
